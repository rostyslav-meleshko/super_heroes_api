(this.webpackJsonpsuper_heroes_api=this.webpackJsonpsuper_heroes_api||[]).push([[0],{92:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(19),i=a.n(o),s=a(21),j=a(23),l=a(44),d=a(58),b=a(59),O=a(14),h=a(16);!function(e){e.SET_FAVORITE_HEROES="SET_FAVORITE_HEROES",e.CLEAR_FAVORITE_HEROES="CLEAR_FAVORITE_HEROES",e.ADD_FAVORITE_HERO="ADD_FAVORITE_HERO",e.REMOVE_FAVORITE_HERO="REMOVE_FAVORITE_HERO"}(n||(n={}));var u,x,p,v={favoriteHeroesIDs:{}},f=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_FAVORITE_HEROES:return Object(h.a)(Object(h.a)({},e),{},{favoriteHeroesIDs:t.favoriteHeroesIDs});case n.ADD_FAVORITE_HERO:return Object(h.a)(Object(h.a)({},e),{},{favoriteHeroesIDs:Object(h.a)(Object(h.a)({},e.favoriteHeroesIDs),{},Object(O.a)({},t.heroId,!0))});case n.REMOVE_FAVORITE_HERO:return Object(h.a)(Object(h.a)({},e),{},{favoriteHeroesIDs:Object(h.a)(Object(h.a)({},e.favoriteHeroesIDs),{},Object(O.a)({},t.heroId,!1))});default:return e}}),Object(d.composeWithDevTools)(Object(l.applyMiddleware)(b.a))),m=f,g=a(12),E=a(126),I=a(7),R=a(129),y=a(112);!function(e){e.HeroName="heroName",e.IsFavorite="isFavorites"}(u||(u={})),function(e){e.AllHeroes="https://akabab.github.io/superhero-api/api/all.json",e.HeroDataById="https://akabab.github.io/superhero-api/api/id/",e.WrongUrl="https://akabab.github.io/superhero-api/api/0.json"}(x||(x={})),function(e){e.FavoriteHeroes="FavoriteHeroes"}(p||(p={}));var H=a(2),w=function(){var e=Object(g.g)(),t=Object(g.h)().search,a=new URLSearchParams(t),n=a.get(u.IsFavorite),c=function(){var e=Object(r.useState)(""),t=Object(I.a)(e,2),a=t[0],n=t[1],c=Object(g.h)().search,o=Object(g.g)();return Object(r.useEffect)((function(){var e=new URLSearchParams(c),t=a.trim();t?e.set(u.HeroName,t):e.delete(u.HeroName),o.location.search.includes(e.toString())||o.push("?".concat(e.toString()))}),[a,o.location.search]),[a,n]}(),o=Object(I.a)(c,2),i=o[0],s=o[1];return Object(H.jsx)("header",{children:Object(H.jsxs)(E.a,{display:"flex",height:"50px",minWidth:"300px",children:[Object(H.jsx)(R.a,{placeholder:"Enter hero name",fullWidth:!0,color:"primary",value:i,onChange:function(e){return s(e.target.value)}}),Object(H.jsx)(y.a,{variant:"contained",size:"small",fullWidth:!0,color:n?"primary":"secondary",name:"toggle-favorite-heroes","data-testid":"header-button-heroes",onClick:function(){a.get(u.IsFavorite)?a.delete(u.IsFavorite):a.set(u.IsFavorite,"true"),e.push("?".concat(a.toString()))},children:n?"All Heroes":"Favorite Heroes"})]})})},F=a(63),_=a(122),S=a(120),k=a(127),A=a(117),D=a(118),T=a(5),C=a(114),V=a(95),M=a(115),W=a(116),L=a(113),N=function(e){var t=e.heroName,a=e.avatarSrc,n=Object(r.useState)(!1),c=Object(I.a)(n,2),o=c[0],i=c[1];return Object(H.jsxs)(H.Fragment,{children:[o?null:Object(H.jsx)(L.a,{style:{margin:"auto"},animation:"pulse",variant:"circle",width:"70%",height:"70%"}),Object(H.jsx)("img",{style:o?{}:{display:"none"},src:"".concat(a),onLoad:function(){i(!0)},alt:"".concat(t," avatar"),title:t,width:"100%"})]})},P=function(e){return e.favoriteHeroesIDs},B=function(e){var t,a=Object(s.b)(),r=Object(s.c)(P),c=e||-1,o=r[c];return t=r,sessionStorage.setItem(p.FavoriteHeroes,JSON.stringify(t)),[function(){a(function(e){return{type:n.ADD_FAVORITE_HERO,heroId:e}}(c))},function(){a(function(e){return{type:n.REMOVE_FAVORITE_HERO,heroId:e}}(c))},o]},J=function(e){var t=e.hero,a=B(t.id),n=Object(I.a)(a,3),r=n[0],c=n[1],o=n[2];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(N,{avatarSrc:t.images.md,heroName:t.name}),Object(H.jsx)(C.a,{title:Object(H.jsx)(j.b,{to:"/hero/".concat(t.name,"/id/").concat(t.id),children:t.name}),position:"bottom",actionIcon:o?Object(H.jsx)(V.a,{"aria-label":"heart ".concat(t.name),onClick:c,children:Object(H.jsx)(M.a,{color:"error","data-testid":"icon-favorite-".concat(t.id)})}):Object(H.jsx)(V.a,{"aria-label":"heart ".concat(t.name),onClick:r,children:Object(H.jsx)(W.a,{color:"error","data-testid":"icon-not-favorite-".concat(t.id)})}),actionPosition:"left"})]})},U=Object(T.a)({root:{cursor:"pointer"}})(A.a),z=function(e){var t=e.isMobile,a=e.showedHeroes;return Object(H.jsx)(E.a,{children:a.length>0&&Object(H.jsx)(D.a,{cols:t?3:6,gap:2,rowHeight:160,children:a.map((function(e){return Object(H.jsx)(U,{children:Object(H.jsx)(J,{hero:e})},e.id)}))})})},Y=a(119),q=function(e){var t=e.text;return Object(H.jsx)(Y.a,{children:Object(H.jsx)(S.a,{variant:"h4",align:"center",color:"error",children:t})})},G=a(121),K=function(){return Object(H.jsx)(E.a,{display:"flex",justifyContent:"center",alignItems:"center",mt:"100px","data-testid":"loader",children:Object(H.jsx)(G.a,{size:200,variant:"indeterminate",thickness:3})})},Q=a(62),X=a(56),Z=a.n(X),$=function(e){var t=Object(s.b)(),a=Object(r.useState)(!1),n=Object(I.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(null),j=Object(I.a)(i,2),l=j[0],d=j[1],b=Object(r.useState)(!1),O=Object(I.a)(b,2),h=O[0],u=O[1];return Object(r.useEffect)((function(){o(!0);var t=function(){var t=Object(Q.a)(Z.a.mark((function t(){var a,n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!((null===(a=t.sent)||void 0===a?void 0:a.status)>299)){t.next=6;break}throw new Error("Response status > 299");case 6:return t.next=8,null===a||void 0===a?void 0:a.json();case 8:n=t.sent,d(n),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.warn(t.t0),u(!0);case 16:return t.prev=16,o(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,12,16,19]])})));return function(){return t.apply(this,arguments)}}();t()}),[e,t]),{isLoading:c,data:l,isError:h}},ee=function(){var e=Object(F.a)(),t=Object(r.useState)(!1),a=Object(I.a)(t,2),n=a[0],c=a[1],o=Object(s.c)(P),i=Object(_.a)(e.breakpoints.down("xs")),j=$(x.AllHeroes),l=j.isLoading,d=j.data,b=j.isError,O=Object(r.useMemo)((function(){return d?d.filter((function(e){return o[e.id]})):[]}),[o,d]),h=Object(r.useState)(1),p=Object(I.a)(h,2),v=p[0],f=p[1],m=Object(g.h)().search,R=Object(r.useMemo)((function(){return new URLSearchParams(m)}),[m]);Object(r.useEffect)((function(){R.get(u.IsFavorite)?c(!0):c(!1)}),[m,R]);var y=i?12:24,w=Object(r.useMemo)((function(){var e,t=(null===(e=R.get("heroName"))||void 0===e?void 0:e.toLowerCase())||"";return d?t.length>=3?d.filter((function(e){var a;return null===(a=e.name.toLowerCase())||void 0===a?void 0:a.includes(t)})):d:[]}),[d,R]),A=Object(r.useMemo)((function(){return n?Math.ceil(O.length/y)||1:Math.ceil(w.length/y)||1}),[O,w,y,n]),D=Object(r.useMemo)((function(){return function(e,t,a,n){if(!e.length)return[];var r=(t-1)*a,c=t>n?t:a*t;return e.slice(r,c)}(n?O:w,v,y,A)}),[v,y,A,w,n,O]),T=n&&!D.length,C=!l&&!b&&D.length>0;return Object(H.jsx)("main",{children:Object(H.jsxs)(E.a,{maxWidth:i?"sm":"lg",minWidth:i?"300px":"600px",mt:"6px",children:[l&&Object(H.jsx)(K,{}),b&&Object(H.jsx)(q,{text:"Loading error. Reload page"}),T&&Object(H.jsx)(S.a,{variant:"h5",align:"center",children:"You don't have favourite heroes yet"}),C&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(z,{isMobile:i,showedHeroes:D}),Object(H.jsx)(E.a,{display:"flex",justifyContent:"center",mt:"6px",children:Object(H.jsx)(k.a,{count:A,size:"small",page:v,onChange:function(e,t){f(t)}})})]})]})})},te=Object(T.a)({root:{component:"div",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch",px:"24px"}})(E.a),ae=function(){return Object(H.jsxs)(te,{children:[Object(H.jsx)(w,{}),Object(H.jsx)(ee,{})]})},ne=a(128),re=a(123),ce=a(124),oe=a(35),ie=a.n(oe),se=Object(T.a)({root:{minWidth:"300px",cursor:"pointer"}})(ne.a),je=function(e){var t=e.hero,a=Object(F.a)(),n=Object(_.a)(a.breakpoints.down("sm")),r=B(null===t||void 0===t?void 0:t.id),c=Object(I.a)(r,3),o=c[0],i=c[1],s=c[2],j=t?Object.keys(t.powerstats):[],l=t?Object.keys(t.appearance):[],d=t?Object.keys(t.biography):[],b=t?Object.keys(t.connections):[],O=t?Object.keys(t.work):[];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(S.a,{variant:n?"h4":"h2",align:"center","data-testid":"header-hero-name",children:[null===t||void 0===t?void 0:t.name,Object(H.jsx)(H.Fragment,{children:s?Object(H.jsx)(V.a,{"aria-label":"heart-hero-page ".concat(null===t||void 0===t?void 0:t.name),onClick:function(){i()},children:Object(H.jsx)(M.a,{color:"error","data-testid":"icon-favorite-hero-page-".concat(null===t||void 0===t?void 0:t.id)})}):Object(H.jsx)(V.a,{"aria-label":"heart-hero-page ".concat(null===t||void 0===t?void 0:t.name),onClick:function(){o()},children:Object(H.jsx)(W.a,{color:"error","data-testid":"icon-not-favorite-hero-page-".concat(null===t||void 0===t?void 0:t.id)})})})]}),Object(H.jsxs)(E.a,{display:"flex",flexDirection:n?"column":"row",children:[t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(E.a,{mr:2,display:"flex",justifyContent:"center",alignItems:"center",children:Object(H.jsx)("img",{src:"".concat(n?t.images.md:t.images.lg),alt:null===t||void 0===t?void 0:t.name,title:null===t||void 0===t?void 0:t.name})}),Object(H.jsxs)(E.a,{display:"flex",flexDirection:"column",flexWrap:"wrap",minWidth:n?"320px":"640px",children:[Object(H.jsxs)(se,{variant:"outlined",children:[Object(H.jsx)(re.a,{expandIcon:Object(H.jsx)(ie.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",title:"Powerstats",children:Object(H.jsx)(S.a,{children:"Powerstats"})}),Object(H.jsx)(ce.a,{children:j.map((function(e){return Object(H.jsxs)(S.a,{variant:"caption",children:[Object(H.jsx)("br",{}),Object(H.jsxs)("p",{children:[e," : ",null===t||void 0===t?void 0:t.powerstats[e]]})," ",Object(H.jsx)("br",{})]},e)}))})]}),Object(H.jsxs)(ne.a,{children:[Object(H.jsx)(re.a,{expandIcon:Object(H.jsx)(ie.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",title:"Appearance",children:Object(H.jsx)(S.a,{children:"Appearance"})}),Object(H.jsx)(ce.a,{children:l.map((function(e){return Object(H.jsxs)(S.a,{children:[e," :"," ","height"===e?null===t||void 0===t?void 0:t.appearance.height[1]:"weight"===e?null===t||void 0===t?void 0:t.appearance.weight[1]:null===t||void 0===t?void 0:t.appearance[e]]},e)}))})]}),Object(H.jsxs)(ne.a,{children:[Object(H.jsx)(re.a,{expandIcon:Object(H.jsx)(ie.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",title:"Biography",children:Object(H.jsx)(S.a,{children:"Biography"})}),Object(H.jsx)(ce.a,{children:d.map((function(e){return Object(H.jsxs)(S.a,{noWrap:!1,children:[e," : ",null===t||void 0===t?void 0:t.biography[e]]},e)}))})]}),Object(H.jsxs)(ne.a,{children:[Object(H.jsx)(re.a,{expandIcon:Object(H.jsx)(ie.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",title:"Connections",children:Object(H.jsx)(S.a,{children:"Connections"})}),Object(H.jsx)(ce.a,{children:b.map((function(e){return Object(H.jsxs)(S.a,{children:[e," : ",null===t||void 0===t?void 0:t.connections[e]]},e)}))})]}),Object(H.jsxs)(ne.a,{children:[Object(H.jsx)(re.a,{expandIcon:Object(H.jsx)(ie.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",title:"Work",children:Object(H.jsx)(S.a,{children:"Work"})}),Object(H.jsx)(ce.a,{children:O.map((function(e){return Object(H.jsxs)(S.a,{children:[e," : ",null===t||void 0===t?void 0:t.work[e]]},e)}))})]})]})]}),!t&&Object(H.jsx)(q,{text:"No such hero found"})]})]})},le=Object(T.a)({root:{cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})(E.a),de=function(){var e=Object(F.a)(),t=Object(_.a)(e.breakpoints.down("sm")),a=Object(g.i)().heroId,n="".concat(x.HeroDataById).concat(a,".json"),r=$(n),c=r.isLoading,o=r.data,i=r.isError,s=!c&&!i;return Object(H.jsxs)(le,{maxWidth:t?"sm":"lg",minWidth:t?"320px":"600px",children:[c&&Object(H.jsx)(K,{}),i&&Object(H.jsx)(q,{text:"Loading error. Reload page"}),s&&Object(H.jsx)(je,{hero:o})]})},be=function(){var e;return Object(s.b)()((e=function(){var e=sessionStorage.getItem(p.FavoriteHeroes);return e?JSON.parse(e):{}}(),{type:n.SET_FAVORITE_HEROES,favoriteHeroesIDs:e})),Object(H.jsxs)(g.d,{children:[Object(H.jsx)(g.b,{path:"/home",exact:!0,children:Object(H.jsx)(ae,{})}),Object(H.jsx)(g.b,{path:"/hero/:heroName/id/:heroId",exact:!0,children:Object(H.jsx)(de,{})}),Object(H.jsx)(g.a,{to:"/home"})]})};i.a.render(Object(H.jsx)(c.a.StrictMode,{children:Object(H.jsx)(s.a,{store:m,children:Object(H.jsx)(j.a,{children:Object(H.jsx)(be,{})})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.60d6bd6d.chunk.js.map